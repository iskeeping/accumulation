## 前言

软件应用发布有全量发布、灰度发布等。全量发布，是软件应用直接从A版本切换到B版本。灰度发布稍微复杂一点，接下来重点描述它。

## 灰度发布的定义

灰度发布（又名金丝雀发布）是指在黑与白之间，能够平滑过渡的一种发布方式。在其上可以进行A/B testing，即让一部分用户继续用软件应用特性A，一部分用户开始用软件应用特性B，如果用户对B没有什么反对意见，那么逐步扩大范围，把所有用户都迁移到B上面来。

## 灰度发布的优点

灰度发布可以保证整体系统的稳定，在初始灰度的时候就可以发现、调整问题，以保证其影响度。

## 灰度发布的原理

灰度发布的原理其实就是对请求进行分流，可以让指定的用户访问指定的具有新功能的服务，其他的用户还是使用老的服务。既然是对请求进行分流，那么这个还是可以在 API 网关中统一处理，网关是对外的入口，当用户的请求过来时，我们可以将特定的用户请求转发到我们刚刚发布好的具有新功能的服务上去。

## 灰度发布的实现策略

1. 根据用户做灰度发布

2. 根据IP做灰度发布

## 灰度发布的实现

请向相关有过实践经验的开发人员讨教。

